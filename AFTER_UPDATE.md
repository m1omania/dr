# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Backend

## ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ

Backend —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
- ‚úÖ `git pull origin main` - –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- ‚úÖ `npm run build` - –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- ‚úÖ `systemctl restart ux-audit-backend` - –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞

```bash
systemctl status ux-audit-backend
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `active (running)`

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 20 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
journalctl -u ux-audit-backend -n 20 --no-pager

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
journalctl -u ux-audit-backend -f
```

–ò—â–∏—Ç–µ:
- ‚úÖ "Server running on port 4001"
- ‚úÖ "–ò—Å–ø–æ–ª—å–∑—É—é Chrome –ø–æ –ø—É—Ç–∏:" (–µ—Å–ª–∏ Chrome –Ω–∞–π–¥–µ–Ω)
- ‚úÖ "üîß –ò—Å–ø–æ–ª—å–∑—É—é --single-process" (–µ—Å–ª–∏ USE_SINGLE_PROCESS=true)
- ‚ùå –û—à–∏–±–∫–∏ –∑–∞–ø—É—Å–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞
- ‚ùå –û—à–∏–±–∫–∏ Chrome

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health endpoint

```bash
curl http://localhost:4001/health
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: `{"status":"ok","timestamp":"..."}`

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É API

```bash
curl -X POST http://localhost:4001/api/audit \
  -H "Content-Type: application/json" \
  -d '{"url":"https://example.com"}'
```

## üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ CPU

### –ï—Å–ª–∏ –Ω–∞–≥—Ä—É–∑–∫–∞ CPU –≤—Å–µ –µ—â–µ –≤—ã—Å–æ–∫–∞—è (80%+)

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd /opt/ux-audit/backend
nano .env
```

–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
```
USE_SINGLE_PROCESS=true
```

–ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
systemctl restart ux-audit-backend
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** `--single-process` —Å–Ω–∏–∑–∏—Ç –Ω–∞–≥—Ä—É–∑–∫—É, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ.

### –ï—Å–ª–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ (4GB+ RAM)

–ú–æ–∂–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `USE_SINGLE_PROCESS`, —Ç–µ–∫—É—â–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å.

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≥—Ä—É–∑–∫–∏

–°–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–∞–≥—Ä—É–∑–∫–æ–π CPU –≤ –ø–∞–Ω–µ–ª–∏ Jino.ru:
- **–ù–æ—Ä–º–∞–ª—å–Ω–∞—è:** 10-30%
- **–í—ã—Å–æ–∫–∞—è:** 50-80%
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è:** 80%+ (–Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã)

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
1. ‚úÖ Backend –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
2. ‚úÖ Chrome –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏
3. ‚úÖ –ù–∞–≥—Ä—É–∑–∫–∞ CPU –¥–æ–ª–∂–Ω–∞ —Å–Ω–∏–∑–∏—Ç—å—Å—è
4. ‚úÖ –û—à–∏–±–∫–∞ 500 –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å
5. ‚úÖ API –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üêõ –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞–ª–∏—Å—å

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏

```bash
journalctl -u ux-audit-backend -n 50 --no-pager | grep -i error
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cat /opt/ux-audit/backend/.env
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- `HUGGINGFACE_API_KEY` –∏–ª–∏ `OPENAI_API_KEY`
- `USE_SINGLE_PROCESS=true` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Chrome

```bash
ls -la ~/.cache/puppeteer/chrome/
```

–ï—Å–ª–∏ Chrome –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:
```bash
cd /opt/ux-audit/backend
PUPPETEER_SKIP_DOWNLOAD=false npx puppeteer browsers install chrome
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ backend –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞ CPU.

